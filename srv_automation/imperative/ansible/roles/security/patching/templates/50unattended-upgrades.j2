// Managed by Ansible: servers_autopatch

Unattended-Upgrade::Allowed-Origins {
{% for origin in servers_autopatch_origins %}
        "{{ origin }}";
{% endfor %}
};

Unattended-Upgrade::Package-Blacklist {
        // Add packages here to never auto-upgrade, e.g.:
        // "raspberrypi-kernel";
};

Unattended-Upgrade::Automatic-Reboot "{{ 'true' if servers_autopatch_auto_reboot else 'false' }}";
Unattended-Upgrade::Automatic-Reboot-Time "{{ servers_autopatch_auto_reboot_time }}";

Unattended-Upgrade::Remove-Unused-Dependencies "{{ 'true' if servers_autopatch_remove_unused_deps else 'false' }}";
Unattended-Upgrade::Remove-Unused-Kernel-Packages "{{ 'true' if servers_autopatch_remove_unused_kernel else 'false' }}";

Unattended-Upgrade::SyslogEnable "true";
Unattended-Upgrade::SyslogFacility "daemon";

{% if servers_autopatch_mail_to | length > 0 %}
Unattended-Upgrade::Mail "{{ servers_autopatch_mail_to }}";
Unattended-Upgrade::MailOnlyOnError "{{ 'true' if servers_autopatch_mail_only_on_error else 'false' }}";
{% else %}
// Unattended-Upgrade::Mail "root";
{% endif %}

// This keeps dpkg from prompting
Dpkg::Options {
        "--force-confdef";
        "--force-confold";
};

